from aiogram import Bot, Dispatcher, types, F
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup

# –û–±—Ä–∞–±–æ—Ç–∫–∞ inline-–∫–Ω–æ–ø–∫–∏
@dp.callback_query(F.data.startswith("save_"))
async def save_character(callback: types.CallbackQuery, state: FSMContext):
    character_id = callback.data.split("_")[1]


    character_name = callback.message.caption.split('\n')[0].replace("üë§ –ò–º—è: ", "")
    character_image = callback.message.photo[-1].file_id

  
    await state.update_data(
        character_id=character_id,
        character_name=character_name,
        character_image=character_image
    )

    await callback.message.answer("–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–µ—Ä—Å–æ–Ω–∞–∂—É:")
    await state.set_state(FSMComment.wait_comment)
    await callback.answer()
